---
title: 本站 - 首页大图模块
date: 2022-01-12 23:35:41
permalink: /about/website/index-big-img/
titleTag: 原创
categories:
  - 关于 - 本站
tags: 
  - 本站
---

::: note

你是否曾进入他人的博客后，占据浏览器大屏的图片映入眼帘，如果你也喜欢这种样式，本内容将介绍如何实现。

::: right

2021-01-11 @Young Kbt

:::

[[TOC]]



## 前言

此时我相信你是直接从我的首页进入该文章，而不是通过地址栏直达此处，当然，如果你是直达，可以浏览一番本内容介绍的大图模块，[点击跳转](/)。



本内容分为两步（为了节省步骤，原本三步 🤣）：

- 在 docs/index.md 添加模板
- 在 docs/.vuepress/config.js（新版 config.ts）的 themeConfig 中配置

## 模板添加

打开 docs/index.md 文档，首先在 frontmatter 添加一个自定义类：

```yml
---
pageClass: vdoing-index-class
---
```

然后滑到文档的最下方，添加模板代码：

```vue
<script>
// 两个变量分别是背景元素的 class、生成的箭头 class
const banner = 'banner';
const banner_arrow = 'banner-arrow';
export default {
  mounted () {
    const arrow = document.getElementById(banner_arrow);
    arrow && arrow.parentNode.removeChild(banner_arrow);
    let a = document.createElement('a');
    a.id = banner_arrow;
    a.className = banner_arrow;
    document.getElementsByClassName(banner)[0].append(a);
    let targetA = document.getElementById(banner_arrow);
    targetA.addEventListener('click', e => { // 添加点击事件
      this.scrollFn();
    });
    let textColor = 1;  // 导航栏字体颜色，为了方便，请在 themeConfig 进行配置，不建议修改此处
    let switchColor = true;  // 离开图片是否切换颜色，为了方便，请在 themeConfig 进行配置，不建议修改此处
    if(this.$themeConfig.indexImg && Object.keys(this.$themeConfig.indexImg).length > 0){
      textColor = this.$themeConfig.indexImg.textColor == undefined ? 1 : this.$themeConfig.indexImg.textColor;
      switchColor = this.$themeConfig.indexImg.switchColor == undefined ? true : this.$themeConfig.indexImg.switchColor;
    }
    // 初始化
    this.noBgBlur();
    this.blurText(textColor);
    this.watchScroll(textColor, switchColor);
  },
  methods: {
    scrollFn() {
      const windowH = document.getElementsByClassName(banner)[0].clientHeight; // 获取窗口高度
      window.scrollTo({
        top: windowH,
        behavior: 'smooth'   // 平滑滚动
      })
    },
    // 监听页面滚动的回调
    watchScroll(textColor, switchColor){
      const windowH = document.getElementsByClassName(banner)[0].clientHeight; // 获取窗口高度
      window.onscroll = () => {
        if(document.documentElement.scrollTop < windowH){
          this.blurText(textColor);
          this.noBgBlur();
        }else{
          if(switchColor && textColor == 1){
            this.blurText(2);
          }else if(switchColor && textColor == 2){
            this.blurText(1);
          }
          this.bgBlur();
        }
      }
    },
    // 导航栏不透明
    bgBlur(){
      let navbar = document.getElementsByClassName('navbar')[0];
      navbar.className = "navbar navbar1 blur";
    },
    // 导航栏透明
    noBgBlur() {
      let navbar = document.getElementsByClassName('navbar')[0];
      navbar.className = "navbar navbar2 blur";
    },
    // 导航栏的字体颜色
    blurText(textColor){
      let title = document.getElementsByClassName('site-name')[0];
      let search = document.getElementsByClassName('search-box')[0];
      let nav = document.getElementsByClassName('nav-links')[0];
      if(textColor == 1){
        title.className = "site-name site-name1 can-hide";
        nav.className = "nav-links nav-links1 can-hide";
        search.className = "search-box search-box1";
      }else if(textColor == 2){
        title.className = "site-name site-name2 can-hide";
        nav.className = "nav-links nav-links2 can-hide";
        search.className = "search-box search-box2";
      }
    },
  }
}
</script>
<style>
/* 图片大小 */
.home-wrapper .banner{
  margin-top: 0 !important;
  height: 100vh;
}
/* 图片中间的签名和标题位置 */
.banner-conent{
  margin-top: 10vh !important;
}
/* 下面是配合 js 用的 class 样式 */
.vdoing-index-class .navbar1{
  background-color: var(--blurBg);
  box-shadow: 0 2px 5px rgba(0,0,0,.06);
  backdrop-filter: saturate(200%) blur(20px);
}
.vdoing-index-class .navbar2{
  background-color: transparent;
  box-shadow: none;
  backdrop-filter: none;
}
.vdoing-index-class .nav-links1 > .nav-item > a,  /* 没有二级导航的一级导航 */
.vdoing-index-class .nav-links1 > a,   /* GitHub */
.vdoing-index-class .nav-links1 .dropdown-title a:hover,   /* 鼠标悬停 */
.vdoing-index-class .nav-links1 .title,     /* 不能跳转的一级导航 */
.vdoing-index-class .nav-links1 .dropdown-title > .link-title,  /* 能跳转的一级导航 */
.vdoing-index-class .site-name1  /* 左侧的名字 */
{
  color: var(--textColor) !important;
}
.vdoing-index-class .search-box1 input{
  border-color: var(--textColor) !important;
  color: var(--textColor) !important;
}
.vdoing-index-class .nav-links2 > .nav-item > a,  /* 没有二级导航的一级导航 */
.vdoing-index-class .nav-links2 > a,   /* GitHub */
.vdoing-index-class .nav-links2 .dropdown-title a:hover,   /* 鼠标悬停 */
.vdoing-index-class .nav-links2 .title,     /* 不能跳转的一级导航 */
.vdoing-index-class .nav-links2 .dropdown-title > .link-title,  /* 能跳转的一级导航 */
.vdoing-index-class .site-name2  /* 左侧的名字 */
{
  color: #fff !important;
}
.vdoing-index-class .search-box2 input{
  border-color: #fff !important;
  color: #fff !important;
}
/* 下面是箭头相关的样式 */
.banner-arrow {
  display: block;
  margin: 12rem auto 0;
  bottom: 45px;
  width: 20px;
  height: 20px;
  font-size: 34px;
  text-align: center;
  animation: bounce-in 5s 3s infinite;
  position: absolute;
  left: 50%;
  bottom: 15%;
  margin-left: -10px;
  cursor: pointer;
  z-index: 99;
}
@-webkit-keyframes bounce-in{
  0%{transform:translateY(0)}
  20%{transform:translateY(0)}
  50%{transform:translateY(-20px)}
  80%{transform:translateY(0)}
  to{transform:translateY(0)}
}
.banner-arrow::before {
  content: "";
  width: 20px;
  height: 20px;
  display: block;
  border-right: 3px solid #fff;
  border-top: 3px solid #fff;
  transform: rotate(135deg);
  position: absolute;
  bottom: 10px;
}
.banner-arrow::after {
  content: "";
  width: 20px;
  height: 20px;
  display: block;
  border-right: 3px solid #fff;
  border-top: 3px solid #fff;
  transform: rotate(135deg);
}
</style>
```

注释已经有说明，但是有两个配置建议在 `themeConfig` 中配置，其他随意。

## 配置添加

打开 docs/.vuepress/config.js（新版 config.ts）文件，在 `themeConfig` 模块里添加如下代码（这是我的配置）：

```js
// 首页大图片配置
indexImg: {
  textColor: 2,    // 导航栏左侧名字、中间搜索框、右侧字体颜色，1 是黑色，2 是白色。默认是 1
  switchColor: true,    // 界面移出大图后，textColor 是否变换，如由白色变黑色，黑色变白色。默认是 false
  // 因为本主题的默认背景色偏向白色，如果 textColor 是 2，建议需要开启(true)，否则白背景 + 白字体 = 看不见
},
```

## 结束语

如果你还有疑惑，可以去我的 GitHub 仓库或者 Gitee 仓库查看源码。

GitHub：<https://github.com/Kele-Bingtang/Kele-Bingtang.github.io>

Gitee：<https://gitee.com/kele-bingtang/Kele-Bingtang>

如果你有更好的方式，评论区留言告诉我，谢谢！

